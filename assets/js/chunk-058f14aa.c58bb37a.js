(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-058f14aa"],{"1ee7":function(e,s,a){},2155:function(e,s,a){"use strict";a.r(s);var i=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"setting-main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:24,md:10,lg:10}},[a("div",{staticClass:"left"},[a("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Password")))]),a("el-form",{ref:"formPassword",staticClass:"setting-content",attrs:{model:e.formPassword,rules:e.rulePassword}},[a("el-form-item",{attrs:{label:e.$t("m.Old_Password"),prop:"oldPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.oldPassword,callback:function(s){e.$set(e.formPassword,"oldPassword",s)},expression:"formPassword.oldPassword"}})],1),a("el-form-item",{attrs:{label:e.$t("m.New_Password"),prop:"newPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.newPassword,callback:function(s){e.$set(e.formPassword,"newPassword",s)},expression:"formPassword.newPassword"}})],1),a("el-form-item",{attrs:{label:e.$t("m.Confirm_New_Password"),prop:"againPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formPassword.againPassword,callback:function(s){e.$set(e.formPassword,"againPassword",s)},expression:"formPassword.againPassword"}})],1)],1),a("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.passwordSlideBlock,callback:function(s){e.$set(e.visible,"passwordSlideBlock",s)},expression:"visible.passwordSlideBlock"}},[a("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnPassword,disabled:e.disabled.btnPassword},slot:"reference"},[e._v(e._s(e.$t("m.Update_Password")))]),a("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.passwordSuccess,expression:"!verify.passwordSuccess"}],ref:"passwordSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,imgs:e.imgs,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changePassword,again:function(s){return e.onAgain("password")}}}),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.passwordSuccess,expression:"verify.passwordSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.passwordMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.passwordAlert.show,expression:"visible.passwordAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.passwordAlert.title,type:e.visible.passwordAlert.type,description:e.visible.passwordAlert.description,closable:!1,effect:"dark","show-icon":""}})],1),a("el-col",{attrs:{md:4,lg:4}},[a("div",{staticClass:"separator hidden-md-and-down"}),a("p")]),a("el-col",{attrs:{sm:24,md:10,lg:10}},[a("div",{staticClass:"right"},[a("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Email")))]),a("el-form",{ref:"formEmail",staticClass:"setting-content",attrs:{model:e.formEmail,rules:e.ruleEmail}},[a("el-form-item",{attrs:{label:e.$t("m.Current_Password"),prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formEmail.password,callback:function(s){e.$set(e.formEmail,"password",s)},expression:"formEmail.password"}})],1),a("el-form-item",{attrs:{label:e.$t("m.Old_Email")}},[a("el-input",{attrs:{disabled:""},model:{value:e.formEmail.oldEmail,callback:function(s){e.$set(e.formEmail,"oldEmail",s)},expression:"formEmail.oldEmail"}})],1),a("el-form-item",{attrs:{label:e.$t("m.New_Email"),prop:"newEmail"}},[a("el-input",{model:{value:e.formEmail.newEmail,callback:function(s){e.$set(e.formEmail,"newEmail",s)},expression:"formEmail.newEmail"}},[a("el-button",{attrs:{slot:"append",loading:e.loading.btnSendEmail,icon:"el-icon-message"},on:{click:e.getChangeEmailCode},slot:"append"},[e._v(" "+e._s(e.$t("m.Get_Captcha"))+" ")])],1)],1),a("el-form-item",{attrs:{label:e.$t("m.Captcha"),prop:"code"}},[a("el-input",{model:{value:e.formEmail.code,callback:function(s){e.$set(e.formEmail,"code",s)},expression:"formEmail.code"}})],1)],1),a("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.emailSlideBlock,callback:function(s){e.$set(e.visible,"emailSlideBlock",s)},expression:"visible.emailSlideBlock"}},[a("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnEmailLoading,disabled:e.disabled.btnEmail},slot:"reference"},[e._v(e._s(e.$t("m.Update_Email")))]),a("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.emailSuccess,expression:"!verify.emailSuccess"}],ref:"emailSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,imgs:e.imgs,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changeEmail,again:function(s){return e.onAgain("email")}}}),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.emailSuccess,expression:"verify.emailSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.emailMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.emailAlert.show,expression:"visible.emailAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.emailAlert.title,type:e.visible.emailAlert.type,description:e.visible.emailAlert.description,closable:!1,effect:"dark","show-icon":""}})],1)],1)],1)},t=[],r=(a("b680"),a("3228")),o=a("7aa9"),l=(a("e05f"),{data:function(){var e=this,s=[{required:!0,trigger:"blur",message:this.$i18n.t("m.The_current_password_cannot_be_empty")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")}],i=function(s,a,i){a!==e.formPassword.newPassword&&i(new Error(e.$i18n.t("m.Password_does_not_match"))),i()},t=function(s,a,i){""!==e.formPassword.oldPassword&&(e.formPassword.oldPassword===e.formPassword.newPassword?i(new Error(e.$i18n.t("m.The_new_password_does_not_change"))):e.$refs.formPassword.validateField("again_password")),i()},r=function(s,a,i){""!==e.formEmail.oldEmail&&e.formEmail.oldEmail===e.formEmail.newEmail&&i(new Error(e.$i18n.t("m.The_new_email_does_not_change"))),i()};return{loading:{btnPassword:!1,btnEmail:!1,btnSendEmail:!1},disabled:{btnPassword:!1,btnEmail:!1},verify:{passwordSuccess:!1,passwordMsg:"",emailSuccess:!1,emailMsg:""},visible:{passwordAlert:{type:"success",show:!1,title:"",description:""},emailAlert:{type:"success",show:!1,title:"",description:""},passwordSlideBlock:!1,emailSlideBlock:!1},formPassword:{oldPassword:"",newPassword:"",againPassword:""},formEmail:{password:"",oldEmail:"",newEmail:""},rulePassword:{oldPassword:s,newPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.The_new_password_cannot_be_empty")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")},{validator:t,trigger:"blur"}],againPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Again_Check_Required")},{validator:i,trigger:"blur"}]},ruleEmail:{password:s,newEmail:[{required:!0,message:this.$i18n.t("m.Email_Check_Required"),trigger:"blur"},{type:"email",trigger:"change",message:this.$i18n.t("m.Email_Check_Format")},{validator:r,trigger:"blur"}],code:[{required:!0,message:this.$i18n.t("m.Code_Check_Required"),trigger:"blur"}]},imgs:[a("32a5"),a("efcc")]}},mounted:function(){this.formEmail.oldEmail=this.$store.getters.userInfo.email||""},methods:{changePassword:function(e){var s=this;this.verify.passwordSuccess=!0;var a=(e/1e3).toFixed(1);this.verify.passwordMsg="Total time "+a+"s",setTimeout((function(){s.visible.passwordSlideBlock=!1,s.verify.passwordSuccess=!1,s.$refs.passwordSlideBlock.reset()}),1e3),this.$refs["formPassword"].validate((function(e){if(e){s.loading.btnPassword=!0;var a=Object.assign({},s.formPassword);delete a.againPassword,r["a"].changePassword(a).then((function(e){s.loading.btnPassword=!1,200==e.data.data.code?(o["a"].success(s.$i18n.t("m.Update_Successfully")),s.visible.passwordAlert={show:!0,title:s.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},setTimeout((function(){s.visible.passwordAlert=!1,s.$router.push({name:"Logout"})}),5e3)):(o["a"].error(e.data.data.msg),s.visible.passwordAlert={show:!0,title:s.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(s.visible.passwordAlert.type="error",s.disabled.btnPassword=!0))}),(function(e){s.loading.btnPassword=!1}))}}))},getChangeEmailCode:function(){var e=this;this.formEmail.newEmail||o["a"].error(this.$i18n.t("m.The_new_email_cannot_be_empty"));var s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;s.test(this.formEmail.newEmail)?(this.formEmail.oldEmail===this.formEmail.newEmail&&o["a"].error(this.$i18n.t("m.The_new_email_does_not_change")),this.loading.btnSendEmail=!0,r["a"].getChangeEmailCode(this.formEmail.newEmail).then((function(s){o["a"].success(e.$i18n.t("m.Change_Send_Email_Msg")),e.$notify.success({title:e.$i18n.t("m.Success"),message:e.$i18n.t("m.Change_Send_Email_Msg"),duration:5e3,offset:50}),e.loading.btnSendEmail=!1}),(function(s){e.loading.btnSendEmail=!1}))):mMessage.error(this.$i18n.t("m.Email_Check_Format"))},changeEmail:function(e){var s=this;this.verify.emailSuccess=!0;var a=(e/1e3).toFixed(1);this.verify.emailMsg="Total time "+a+"s",setTimeout((function(){s.visible.emailSlideBlock=!1,s.verify.emailSuccess=!1,s.$refs.emailSlideBlock.reset()}),1e3),this.$refs["formEmail"].validate((function(e){if(e){s.loading.btnEmail=!0;var a=Object.assign({},s.formEmail);r["a"].changeEmail(a).then((function(e){s.loading.btnEmail=!1,200==e.data.data.code?(o["a"].success(s.$i18n.t("m.Update_Successfully")),s.visible.emailAlert={show:!0,title:s.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},s.$store.dispatch("setUserInfo",e.data.data.userInfo),s.$refs["formEmail"].resetFields(),s.formEmail.oldEmail=e.data.data.userInfo.email):(o["a"].error(e.data.data.msg),s.visible.emailAlert={show:!0,title:s.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(s.visible.emailAlert.type="error",s.disabled.btnEmail=!0))}),(function(e){s.loading.btnEmail=!1}))}}))},onAgain:function(e){"password"?this.$refs.passwordSlideBlock.reset():this.$refs.emailSlideBlock.reset(),o["a"].warning(this.$i18n.t("m.Guess_robot"))}}}),n=l,d=(a("a1b7"),a("2877")),m=Object(d["a"])(n,i,t,!1,null,"99ac4d22",null);s["default"]=m.exports},a1b7:function(e,s,a){"use strict";a("1ee7")}}]);