(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85c6c98a"],{"0dff":function(e,t,i){},a15b:function(e,t,i){"use strict";var l=i("23e7"),o=i("44ad"),a=i("fc6a"),s=i("a640"),n=[].join,r=o!=Object,d=s("join",",");l({target:"Array",proto:!0,forced:r||!d},{join:function(e){return n.call(a(this),void 0===e?",":e)}})},b156:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"liquid-glass forced"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Export_Problem")))]),i("div",{staticClass:"filter-row"},[i("span",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-down"},on:{click:e.exportProblems}},[e._v(e._s(e.$t("m.Export"))+" ")])],1),i("span",[i("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)])]),i("vxe-table",{ref:"xTable",attrs:{data:e.problems,stripe:"","auto-resize":"",loading:e.loadingProblems,"checkbox-config":{labelField:"",highlight:!0,range:!0}},on:{"checkbox-change":e.handleSelectionChange,"checkbox-all":e.handlechangeAll}},[i("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),i("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"id"}}),i("vxe-table-column",{attrs:{"min-width":"150",title:e.$t("m.Title"),field:"title"}}),i("vxe-table-column",{attrs:{"min-width":"150",field:"author",title:e.$t("m.Author")}}),i("vxe-table-column",{attrs:{field:"gmtCreate",title:e.$t("m.Created_Time")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(e._f("localtime")(i.gmtCreate))+" ")]}}])})],1),i("div",{staticClass:"panel-options"},[i("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next, sizes","page-size":e.limit,"page-sizes":[10,50,100,500],total:e.total},on:{"current-change":e.getProblems,"size-change":e.handleSizeChange}})],1)],1),i("el-card",{staticClass:"liquid-glass forced",staticStyle:{"margin-top":"15px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Problem")))])]),i("el-upload",{ref:"hoj",attrs:{action:"/api/file/import-problem",name:"file","file-list":e.fileList1,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile1Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[i("el-button",{attrs:{slot:"trigger",size:"small",loading:e.loading.hoj,type:"primary",icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.hoj,disabled:!e.fileList1.length,icon:"el-icon-upload"},on:{click:function(t){return e.submitUpload("hoj")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1),i("el-card",{staticClass:"liquid-glass forced",staticStyle:{"margin-top":"15px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_QDUOJ_Problem")))])]),i("el-upload",{ref:"qduoj",attrs:{action:"/api/file/import-qdoj-problem",name:"file","file-list":e.fileList2,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile2Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.qduoj,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.qduoj,icon:"el-icon-upload",disabled:!e.fileList2.length},on:{click:function(t){return e.submitUpload("qduoj")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1),i("el-card",{staticClass:"liquid-glass forced",staticStyle:{"margin-top":"15px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_FPS_Problem")))])]),i("el-upload",{ref:"fps",attrs:{action:"/api/file/import-fps-problem",name:"file","file-list":e.fileList3,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile3Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.fps,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.fps,icon:"el-icon-upload",disabled:!e.fileList3.length},on:{click:function(t){return e.submitUpload("fps")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1),i("el-card",{staticClass:"liquid-glass forced",staticStyle:{"margin-top":"15px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Hydro_Problem")))])]),i("el-upload",{ref:"hydro",attrs:{action:"/api/file/import-hydro-problem",name:"file","file-list":e.fileList4,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile4Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.hydro,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.hydro,icon:"el-icon-upload",disabled:!e.fileList4.length},on:{click:function(t){return e.submitUpload("hydro")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1)],1)},o=[],a=(i("a15b"),i("fb6a"),i("b85c")),s=i("3228"),n=i("90b9"),r=i("7aa9"),d={name:"import_and_export",data:function(){return{fileList1:[],fileList2:[],fileList3:[],fileList4:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[],selected_problems:[],loading:{hoj:!1,qduoj:!1,fps:!1,hydro:!1}}},mounted:function(){this.getProblems()},methods:{handleSelectionChange:function(e){var t=e.records;this.selected_problems=t},handlechangeAll:function(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},handleSizeChange:function(e){this.limit=e,this.getProblems()},getProblems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i={keyword:this.keyword,currentPage:t,limit:this.limit,oj:"Mine"};this.loadingProblems=!0,s["a"].admin_getProblemList(i).then((function(t){e.problems=t.data.data.records,e.total=t.data.data.total,e.loadingProblems=!1}))},exportProblems:function(){var e=[];if(this.selected_problems.length<=0)r["a"].error(this.$i18n.t("m.Export_Problem_NULL_Tips"));else{var t,i=Object(a["a"])(this.selected_problems);try{for(i.s();!(t=i.n()).done;){var l=t.value;e.push("pid="+l.id)}}catch(s){i.e(s)}finally{i.f()}var o="/api/file/export-problem?"+e.join("&");n["a"].downloadFile(o)}},submitUpload:function(e){this.loading[e]=!0,this.$refs[e].submit()},onFile1Change:function(e,t){this.fileList1=t.slice(-1)},onFile2Change:function(e,t){this.fileList2=t.slice(-1)},onFile3Change:function(e,t){this.fileList3=t.slice(-1)},onFile4Change:function(e,t){this.fileList4=t.slice(-1)},uploadSucceeded:function(e,t,i){this.loading.hoj=!1,this.loading.qduoj=!1,this.loading.fps=!1,this.loading.hydro=!1,200!=e.status?(r["a"].error(e.msg),this.$notify.error({title:this.$i18n.t("m.Error"),message:e.msg,dangerouslyUseHTMLString:!0,duration:8e3})):(r["a"].success(this.$i18n.t("m.Upload_Problem_Succeeded")),this.getProblems())},uploadFailed:function(){this.loading.hoj=!1,this.loading.qduoj=!1,this.loading.fps=!1,this.loading.hydro=!1,r["a"].error(this.$i18n.t("m.Upload_Problem_Failed"))},filterByKeyword:function(){this.getProblems()}}},c=d,p=(i("fd48"),i("2877")),u=Object(p["a"])(c,l,o,!1,null,"1034313a",null);t["default"]=u.exports},fd48:function(e,t,i){"use strict";i("0dff")}}]);