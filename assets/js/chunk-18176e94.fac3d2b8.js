(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18176e94"],{"0a8f":function(i,t,n){},5315:function(i,t,n){"use strict";n("0a8f")},ecc7:function(i,t,n){"use strict";n.r(t);var a=function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"view"},[n("el-card",{staticClass:"liquid-glass forced"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[i._v(" "+i._s(i.title)+" ")])]),n("el-form",{attrs:{"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:i.$t("m.Training_rank"),required:""}},[n("el-input-number",{attrs:{min:0,max:2147483647,label:i.$t("m.Training_rank")},on:{change:i.handleChange},model:{value:i.training.rank,callback:function(t){i.$set(i.training,"rank",t)},expression:"training.rank"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:i.$t("m.Training_Title"),required:""}},[n("el-input",{attrs:{placeholder:i.$t("m.Training_Title")},model:{value:i.training.title,callback:function(t){i.$set(i.training,"title",t)},expression:"training.title"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:i.$t("m.Training_Description"),required:""}},[n("Editor",{attrs:{value:i.training.description},on:{"update:value":function(t){return i.$set(i.training,"description",t)}}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:i.$t("m.Category"),required:""}},[n("el-select",{model:{value:i.trainingCategoryId,callback:function(t){i.trainingCategoryId=t},expression:"trainingCategoryId"}},i._l(i.trainingCategoryList,(function(i,t){return n("el-option",{key:t,attrs:{label:i.name,value:i.id}})})),1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:i.$t("m.Training_Auth"),required:""}},[n("el-select",{model:{value:i.training.auth,callback:function(t){i.$set(i.training,"auth",t)},expression:"training.auth"}},[n("el-option",{attrs:{label:i.$t("m.Public_Training"),value:"Public"}}),n("el-option",{attrs:{label:i.$t("m.Private_Training"),value:"Private"}})],1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Public"!=i.training.auth,expression:"training.auth != 'Public'"}],attrs:{label:i.$t("m.Training_Password"),required:"Public"!=i.training.auth}},[n("el-input",{attrs:{placeholder:i.$t("m.Training_Password")},model:{value:i.training.privatePwd,callback:function(t){i.$set(i.training,"privatePwd",t)},expression:"training.privatePwd"}})],1)],1)],1)],1),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return i.saveTraining(t)}}},[i._v(i._s(i.$t("m.Save")))])],1)],1)},e=[],r=(n("a4d3"),n("e01a"),n("b0c0"),n("d3b7"),n("5530")),s=n("3228"),l=n("2f62"),o=n("7aa9"),u=function(){return Promise.resolve().then(n.bind(null,"a956"))},g={name:"CreateTraining",components:{Editor:u},data:function(){return{title:"Create Training",training:{rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},trainingCategoryId:null,trainingCategoryList:[]}},mounted:function(){this.init()},watch:{$route:function(){"admin-edit-training"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Training"),this.getTraining()):(this.title=this.$i18n.t("m.Create_Training"),this.training={rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"})}},computed:Object(r["a"])({},Object(l["c"])(["userInfo"])),methods:{init:function(){var i=this;s["a"].getTrainingCategoryList().then((function(t){var n=t.data.data;n&&n.length?(i.trainingCategoryList=n,"admin-edit-training"===i.$route.name?(i.title=i.$i18n.t("m.Edit_Training"),i.getTraining()):i.title=i.$i18n.t("m.Create_Training")):i.$alert(i.$i18n.t("m.Redirect_To_Category"),i.$i18n.t("m.Redirect"),{confirmButtonText:i.$i18n.t("m.OK"),showClose:!1,callback:function(t){i.$router.push({path:"/admin/training/category"})}})}))},getTraining:function(){var i=this;s["a"].admin_getTraining(this.$route.params.trainingId).then((function(t){var n=t.data.data;i.training=n.training||{},i.trainingCategoryId=n.trainingCategory.id||null})).catch((function(){}))},saveTraining:function(){var i=this;if(this.training.rank||0==this.training.rank)if(this.training.title)if(this.training.description)if(this.trainingCategoryId)if("Public"==this.training.auth||this.training.privatePwd){var t="admin-edit-training"===this.$route.name?"admin_editTraining":"admin_createTraining",n=Object.assign({},this.training);"admin_createTraining"===t&&(n["author"]=this.userInfo.username);var a={training:n,trainingCategory:{id:this.trainingCategoryId}};s["a"][t](a).then((function(t){o["a"].success("success"),i.$router.push({name:"admin-training-list",query:{refresh:"true"}})})).catch((function(){}))}else o["a"].error(this.$i18n.t("m.Training_Password")+" "+this.$i18n.t("m.is_required"));else o["a"].error(this.$i18n.t("m.Training_Category")+" "+this.$i18n.t("m.is_required"));else o["a"].error(this.$i18n.t("m.Training_Description")+" "+this.$i18n.t("m.is_required"));else o["a"].error(this.$i18n.t("m.Training_Title")+" "+this.$i18n.t("m.is_required"));else o["a"].error(this.$i18n.t("m.Training_rank")+" "+this.$i18n.t("m.is_required"))}}},c=g,d=(n("5315"),n("2877")),m=Object(d["a"])(c,a,e,!1,null,"e3919d46",null);t["default"]=m.exports}}]);